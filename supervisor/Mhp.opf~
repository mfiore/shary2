cd;; -*-Lisp-*-
;;author: Michelangelo Fiore
;;this module contains utilities procedures for MHP. The basic idea is to put into this files only procedures for repetitive things, like creating parameters, but allowing the ExecutionManager control over parameters.

(
 (defop |armPlanTask|
   :documentation "creates the parameters structure for the mhp request arm plan task"
   :invocation (!(Mhp.armPlanTask @trajId @startIsCurrent @task @arm  @qStart @qGoTo @object @support @placement @isCartesian @useObjectStart @objectStartPose @useObjectGoTo @objectGoToPose))
   :body (

	  (!(= $PARAMETERS       (STRUCT_MHP_ARM_PLAN_PARAMS 
				  (trajId  (VAL @trajId))                        
				  (startIsCurrent  (VAL @startIsCurrent))      
				  (taskType (VAL @task))                   
				  (armId (VAL @arm))                      
				  (VAL @qStart)                           
				  (VAL @qGoTo)                            
				  (objectName 
				   (name  (TERM-STRING-CAT @object)))     
				  (supportName 
				   (name  (TERM-STRING-CAT @support)))    
				  (placementName 
				   (name  (TERM-STRING-CAT @placement)))  
				  (cartesian  (VAL @isCartesian))         
				  (useObjStart  (VAL @useObjectStart))    
				  (VAL @objectStartPose)                   
				  (unused2  0)                                                     
				  (useObjGoto (VAL @useObjectGoTo))        
				  (VAL @objectGoToPose)                   
				  )))
	  (!(GenomInterface.makeRequest MHP MHP_ARMPLANTASK (ROBOT-ARM-BREAKS on) FALSE 300 (VAL @parameter) TRUE @reportTmp))


	  
   )
 )
)
